<section style="height: 150%">
<div class="container" style="margin-top: 50px;">
    <div class="header">
      <div class="title-container">
        <h2>{{ title }}</h2>
        <div class="book-icon">üìö</div>
      </div>
      <div class="input-group">
        <input
          type="text"
          placeholder="√öj k√∂nyv hozz√°ad√°sa..."
          [(ngModel)]="newBookName"
          (keyup.enter)="addBook()"
        />
        <select [(ngModel)]="newBookPriority">
          <option *ngFor="let priority of priorities" [value]="priority">
            {{ priority }}
          </option>
        </select>
        <button (click)="addBook()" [disabled]="!newBookName.trim()">
          <span class="plus-icon">+</span> Hozz√°ad√°s
        </button>
      </div>
    </div>

    <div *ngIf="isLoading" class="loading">Bet√∂lt√©s...</div>

    <div class="stats" *ngIf="!isLoading && konyvek.length">
      <div class="stat-item">
        <span class="stat-number">{{ getTotalBooks() }}</span>
        <span class="stat-label">√ñsszes k√∂nyv</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ getCompletedBooks() }}</span>
        <span class="stat-label">Elolvasott</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ getPendingBooks() }}</span>
        <span class="stat-label">H√°tral√©v≈ë</span>
      </div>
    </div>

    <table *ngIf="!isLoading">
      <thead>
        <tr>
          <th width="60px">St√°tusz</th>
          <th>C√≠m</th>
          <th width="120px">Priorit√°s</th>
          <th width="150px">Felv√©tel d√°tuma</th>
          <th width="80px"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let konyv of konyvek; trackBy: trackById" [class.completed-row]="konyv.completed">
          <td>
            <label class="checkbox-container">
              <input type="checkbox" [checked]="konyv.completed" (change)="toggleBookCompletion(konyv)" />
              <span class="checkmark"></span>
            </label>
          </td>
          <td
            [class.completed]="konyv.completed"
            [appCustomColor]="konyv.completed"
            appHighlightOnHover
          >
            {{ konyv.title }}
            <span *ngIf="isNew(konyv)" class="new-badge">√öj</span>
          </td>
          <td>
            <span class="priority {{ konyv.priority.toLowerCase() }}">
              {{ konyv.priority }}
              <span class="priority-icon">{{ getPriorityIcon(konyv.priority) }}</span>
            </span>
          </td>
          <td>{{ konyv.addedDate | dateFormatter }}</td>
          <td>
            <button class="delete-btn" (click)="deleteBook(konyv.id)">
              <span class="trash-icon">üóëÔ∏è</span>
            </button>
          </td>
        </tr>
        <tr *ngIf="konyvek.length === 0">
          <td colspan="5" class="empty-message">
            Nincsenek k√∂nyvek a list√°ban. Adj hozz√° √∫jat!
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>